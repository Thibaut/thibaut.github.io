/*
 * Copyright 2013-2017 Thibaut Courouble
 */
(function(){var t,e,s,i,r,n,l,o=function(t,e){return function(){return t.apply(e,arguments)}};i=window.document,s=function(t,e,s){var r;return r=i.createElement(t),e&&(r.className=e),s&&(r.innerHTML=s),r},e=function(t,e,s){return t.addEventListener(e,s,!1)},n=function(t,e,s){return t.removeEventListener(e,s,!1)},l=null,function(){var t,e,s,r;for(e in s=[],r={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"})if(t=r[e],null!=i.body.style[e]){e,l=t;break}}(),t=function(){function t(t){var i;this.el=t,this.onKeydown=o(this.onKeydown,this),this.onMouseout=o(this.onMouseout,this),this.onMouseover=o(this.onMouseover,this),this.onClick=o(this.onClick,this),this.toggleFullScreen=o(this.toggleFullScreen,this),this.slideNext=o(this.slideNext,this),this.slidePrev=o(this.slidePrev,this),this.list=this.findByClass("gallery-list"),this.bar=this.findByClass("gallery-bar"),this.length=this.list.children.length,this.bar.appendChild(i=s("a","gallery-prev","Previous")),e(i,"click",this.slidePrev),this.bar.appendChild(i=s("a","gallery-next","Next")),e(i,"click",this.slideNext),this.bar.appendChild(i=s("a","gallery-toggle","Fullscreen")),e(i,"click",this.toggleFullScreen),e(this.el,"mouseover",this.onMouseover),e(this.list,"click",this.onClick),this.goTo(0)}return t.prototype.findByClass=function(t){return this.el.getElementsByClassName(t)[0]},t.prototype.goTo=function(t){if(!this.lock)return this.setCursor(t),this.setCurrent()},t.prototype.slideTo=function(t){var s,i,r,o,a;if(!this.lock)return l?(this.lock=!0,t>this.cursor?(o="next",i="left"):(o="prev",i="right"),this.setCursor(t),(r=this.list.children[this.cursor]).className+=" "+o,r.offsetWidth,r.className+=" "+i,this.current.className+=" "+i,a=this,s=function(){return r.className=r.className.replace(" "+o+" "+i,""),a.current.className=a.current.className.replace(" "+i,""),a.setCurrent(),a.lock=!1,n(a.list,l,s)},e(this.list,l,s)):this.goTo(t)},t.prototype.setCursor=function(t){return this.cursor=(t<0?this.length+t%this.length:t)%this.length,this.loadSlide(this.cursor),this.setCaption()},t.prototype.setCurrent=function(){var t;return null!=(t=this.current)&&(t.className=this.current.className.replace(" current","")),this.current=this.list.children[this.cursor],this.current.className+=" current"},t.prototype.loadSlide=function(t){var e,i,r,n;if((i=this.list.children[t])&&"A"!==i.tagName)return(r=s("img","gallery-image")).src=i.getAttribute("data-src"),i.hasAttribute("data-srcset")&&r.setAttribute("srcset",i.getAttribute("data-srcset")),(n=s("a","gallery-item")).href=r.src,n.setAttribute("target","_blank"),(e=i.getAttribute("data-caption"))&&n.setAttribute("data-caption",e),n.appendChild(r),this.list.replaceChild(n,i)},t.prototype.setCaption=function(){var t;return(t=this.list.children[this.cursor].getAttribute("data-caption"))?this.el.setAttribute("data-caption",t):this.el.removeAttribute("data-caption"),this.captionText||this.bar.appendChild(this.captionText=i.createTextNode("")),this.captionText.textContent=this.fullscreen?this.cursor+1+"/"+this.length:"# "+(this.cursor+1)+" of "+this.length},t.prototype.slidePrev=function(){return this.slideTo(this.cursor-1),this.loadSlide(this.cursor-1),!1},t.prototype.slideNext=function(){return this.slideTo(this.cursor+1),this.loadSlide(this.cursor+1),!1},t.prototype.toggleFullScreen=function(){return this.fullscreen?(this.leaveFullScreen(),this.fullscreen=!1):(this.enterFullScreen(),this.fullscreen=!0),this.setCaption(),!1},t.prototype.enterFullScreen=function(){return this.scrollTop=i.documentElement.scrollTop,this.el.className+=" gallery-fullscreen",this.findByClass("gallery-toggle").textContent="Exit Fullscreen",i.documentElement.style.overflowY="hidden"},t.prototype.leaveFullScreen=function(){return this.el.className=this.el.className.replace(" gallery-fullscreen",""),this.findByClass("gallery-toggle").textContent="Fullscreen",i.documentElement.style.overflowY="scroll",i.documentElement.scrollTop=this.scrollTop},t.prototype.onClick=function(t){if(!this.fullscreen||"IMG"!==t.target.tagName)return t.preventDefault(),this.toggleFullScreen()},t.prototype.onMouseover=function(){if(!this.over)return this.over=!0,this.loadSlide(1),e(window,"keydown",this.onKeydown),e(this.el,"mouseout",this.onMouseout)},t.prototype.onMouseout=function(t){var e;for(e=t.relatedTarget;e&&e!==this.el;)e=e.parentElement;if(!e)return this.over=!1,n(window,"keydown",this.onKeydown),n(this.el,"mouseout",this.onMouseout)},t.prototype.onKeydown=function(t){if(!(t.ctrlKey||t.shiftKey||t.altKey||t.metaKey)){if(37===t.keyCode)this.slidePrev();else if(39===t.keyCode)this.slideNext();else{if(27!==t.keyCode||!this.fullscreen)return;this.toggleFullScreen()}return!1}},t}(),r=function(){var e,s,r,n,l;for(l=[],s=0,r=(n=i.querySelectorAll(".gallery")).length;s<r;s++)e=n[s],l.push(new t(e));return l},i.addEventListener("DOMContentLoaded",r,!1),i.body.className=i.body.className.replace("noscript ",""),"undefined"!=typeof ontouchstart&&(i.body.className+=" touch")}).call(this);