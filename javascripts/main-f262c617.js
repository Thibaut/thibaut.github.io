/*
 * Copyright 2013-2017 Thibaut Courouble
 */
(function(){var n,l,o,a,t,h,c,s=function(t,e){return function(){return t.apply(e,arguments)}};a=window.document,o=function(t,e,s){var i;return i=a.createElement(t),e&&(i.className=e),s&&(i.innerHTML=s),i},l=function(t,e,s){return t.addEventListener(e,s,!1)},h=function(t,e,s){return t.removeEventListener(e,s,!1)},c=null,function(){var t,e,s,i;for(e in s=[],i={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"})if(t=i[e],null!=a.body.style[e]){e,c=t;break}}(),n=function(){function t(t){var e;this.el=t,this.onKeydown=s(this.onKeydown,this),this.onMouseout=s(this.onMouseout,this),this.onMouseover=s(this.onMouseover,this),this.onClick=s(this.onClick,this),this.toggleFullScreen=s(this.toggleFullScreen,this),this.slideNext=s(this.slideNext,this),this.slidePrev=s(this.slidePrev,this),this.list=this.findByClass("gallery-list"),this.bar=this.findByClass("gallery-bar"),this.length=this.list.children.length,this.bar.appendChild(e=o("a","gallery-prev","Previous")),l(e,"click",this.slidePrev),this.bar.appendChild(e=o("a","gallery-next","Next")),l(e,"click",this.slideNext),this.bar.appendChild(e=o("a","gallery-toggle","Fullscreen")),l(e,"click",this.toggleFullScreen),l(this.el,"mouseover",this.onMouseover),l(this.list,"click",this.onClick),this.goTo(0)}return t.prototype.findByClass=function(t){return this.el.getElementsByClassName(t)[0]},t.prototype.goTo=function(t){if(!this.lock)return this.setCursor(t),this.setCurrent()},t.prototype.slideTo=function(t){var e,s,i,r,n;if(!this.lock)return c?(this.lock=!0,t>this.cursor?(r="next",s="left"):(r="prev",s="right"),this.setCursor(t),(i=this.list.children[this.cursor]).className+=" "+r,i.offsetWidth,i.className+=" "+s,this.current.className+=" "+s,e=function(){return i.className=i.className.replace(" "+r+" "+s,""),n.current.className=n.current.className.replace(" "+s,""),n.setCurrent(),n.lock=!1,h(n.list,c,e)},l((n=this).list,c,e)):this.goTo(t)},t.prototype.setCursor=function(t){return this.cursor=(t<0?this.length+t%this.length:t)%this.length,this.loadSlide(this.cursor),this.setCaption()},t.prototype.setCurrent=function(){var t;return null!=(t=this.current)&&(t.className=this.current.className.replace(" current","")),this.current=this.list.children[this.cursor],this.current.className+=" current"},t.prototype.loadSlide=function(t){var e,s,i,r;if((s=this.list.children[t])&&"A"!==s.tagName)return(i=o("img","gallery-image")).src=s.getAttribute("data-src"),s.hasAttribute("data-srcset")&&i.setAttribute("srcset",s.getAttribute("data-srcset")),(r=o("a","gallery-item")).href=i.src,r.setAttribute("target","_blank"),(e=s.getAttribute("data-caption"))&&r.setAttribute("data-caption",e),r.appendChild(i),this.list.replaceChild(r,s)},t.prototype.setCaption=function(){var t;return(t=this.list.children[this.cursor].getAttribute("data-caption"))?this.el.setAttribute("data-caption",t):this.el.removeAttribute("data-caption"),this.captionText||this.bar.appendChild(this.captionText=a.createTextNode("")),this.captionText.textContent=this.fullscreen?this.cursor+1+"/"+this.length:"# "+(this.cursor+1)+" of "+this.length},t.prototype.slidePrev=function(){return this.slideTo(this.cursor-1),this.loadSlide(this.cursor-1),!1},t.prototype.slideNext=function(){return this.slideTo(this.cursor+1),this.loadSlide(this.cursor+1),!1},t.prototype.toggleFullScreen=function(){return this.fullscreen?(this.leaveFullScreen(),this.fullscreen=!1):(this.enterFullScreen(),this.fullscreen=!0),this.setCaption(),!1},t.prototype.enterFullScreen=function(){return this.scrollTop=a.documentElement.scrollTop,this.el.className+=" gallery-fullscreen",this.findByClass("gallery-toggle").textContent="Exit Fullscreen",a.documentElement.style.overflowY="hidden"},t.prototype.leaveFullScreen=function(){return this.el.className=this.el.className.replace(" gallery-fullscreen",""),this.findByClass("gallery-toggle").textContent="Fullscreen",a.documentElement.style.overflowY="scroll",a.documentElement.scrollTop=this.scrollTop},t.prototype.onClick=function(t){if(!this.fullscreen||"IMG"!==t.target.tagName)return t.preventDefault(),this.toggleFullScreen()},t.prototype.onMouseover=function(){if(!this.over)return this.over=!0,this.loadSlide(1),l(window,"keydown",this.onKeydown),l(this.el,"mouseout",this.onMouseout)},t.prototype.onMouseout=function(t){var e;for(e=t.relatedTarget;e&&e!==this.el;)e=e.parentElement;if(!e)return this.over=!1,h(window,"keydown",this.onKeydown),h(this.el,"mouseout",this.onMouseout)},t.prototype.onKeydown=function(t){if(!(t.ctrlKey||t.shiftKey||t.altKey||t.metaKey)){if(37===t.keyCode)this.slidePrev();else if(39===t.keyCode)this.slideNext();else{if(27!==t.keyCode||!this.fullscreen)return;this.toggleFullScreen()}return!1}},t}(),t=function(){var t,e,s,i,r;for(r=[],e=0,s=(i=a.querySelectorAll(".gallery")).length;e<s;e++)t=i[e],r.push(new n(t));return r},a.addEventListener("DOMContentLoaded",t,!1),a.body.className=a.body.className.replace("noscript ",""),"undefined"!=typeof ontouchstart&&(a.body.className+=" touch")}).call(this);